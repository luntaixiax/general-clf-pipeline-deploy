name: test self hosted runners
on:
  push:
    branches:
      - 'main'


jobs: # define two jobs, CI and CD
  # job1 - CI
  model-build:
    runs-on: evelyn-windows
    steps:
      # - name: Dockerhub Login
      #   uses: docker/login-action@v2
      #   with:
      #     username: ${{ secrets.DOCKERHUB_USERNAME }}
      #     password: ${{ secrets.DOCKERHUB_TOKEN }}
      
      - uses: actions/checkout@v3
      
      - name: list files
        run: ls -l

      - name: test connection to NAS
        run: ping 192.168.2.84

      - name: test connection to VM
        run: ping 192.168.2.85

      # - name: read model version tag
      #   id: ver_tag
      #   uses: jbutcher5/read-yaml@main  # read yaml prebuilt action
      #   with:
      #     file: './backend-fastapi/meta.yaml'
      #     key-path: '["model", "version-tag"]'

      # - name: read dockerhub model name
      #   id: model_nm
      #   uses: jbutcher5/read-yaml@main  # read yaml prebuilt action
      #   with:
      #     file: './backend-fastapi/meta.yaml'
      #     key-path: '["model", "docker-image-name"]'
      
      # - name: Build and push image
      #   working-directory: fake-data-generator
      #   run: |
      #     model_hub_nm=${{ secrets.DOCKERHUB_USERNAME }}/general-clf-faker
      #     docker build -t ${model_hub_nm} .
      #     docker push ${model_hub_nm}
      